<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.104.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Glimesh API Requests With NodeJS # This is a basic tutorial for communicating with the Glimesh API using NodeJS. This guide assumes you know basic JS and have an access token from a user. You can use a client ID if you do not yet have a token. Having basic GraphQL knowledge would also be helpful.
Need a refresh? This tutorial explains the basics of graphql. https://graphql.org/learn/schema/
Creating the Project # We need to create a basic project."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="NodeJS Query"><meta property="og:description" content="Glimesh API Requests With NodeJS # This is a basic tutorial for communicating with the Glimesh API using NodeJS. This guide assumes you know basic JS and have an access token from a user. You can use a client ID if you do not yet have a token. Having basic GraphQL knowledge would also be helpful.
Need a refresh? This tutorial explains the basics of graphql. https://graphql.org/learn/schema/
Creating the Project # We need to create a basic project."><meta property="og:type" content="article"><meta property="og:url" content="https://glimesh.github.io/api-docs/docs/api/query-api/nodejs/node-query/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-10-15T14:35:05-05:00"><title>NodeJS Query | API-Docs</title><link rel=manifest href=/api-docs/manifest.json><link rel=icon href=/api-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/api-docs/book.min.8cbfebb3cede38504cf8ec2af15528c78f5d6c0aa02b6e39dcffcd3320289b34.css integrity="sha256-jL/rs87eOFBM+Owq8VUox49dbAqgK2453P/NMyAomzQ="><script defer src=/api-docs/en.search.min.21cc3c0d403d98c325e6750c9c7a877667f41fce9f699ec6cb5924f344c5ab67.js integrity="sha256-Icw8DUA9mMMl5nUMnHqHdmf0H86faZ7Gy1kk80TFq2c="></script>
<script src=https://kit.fontawesome.com/a076d05399.js></script>
<script src=https://cdn.jsdelivr.net/npm/react@16/umd/react.production.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/react-dom@16/umd/react-dom.production.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/graphql-voyager/dist/voyager.css><script src=https://cdn.jsdelivr.net/npm/graphql-voyager/dist/voyager.min.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/api-docs><img src=/api-docs/glimesh.png alt=Logo><span>API-Docs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-bf7b3283e3790c00c8caaa140299052b class=toggle checked>
<label for=section-bf7b3283e3790c00c8caaa140299052b class="flex justify-between"><a>API</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-ed972e555096d8550e03791bdee2d785 class=toggle checked>
<label for=section-ed972e555096d8550e03791bdee2d785 class="flex justify-between"><a>API Queries</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/api/query-api/basic-query/>Generic Query</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/query-api/nodejs/node-query/ class=active>NodeJS Query</a></li></ul></li><li><input type=checkbox id=section-8c27155e24a80e56e9d44dbeacd7d1ea class=toggle>
<label for=section-8c27155e24a80e56e9d44dbeacd7d1ea class="flex justify-between"><a>Stream Settings</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/api/stream/updatestreaminfo/>Update Stream Info</a></li></ul></li><li><a href=https://glimesh.github.io/api-docs/docs/api/api-explorer/>API Explorer</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/migration/>Migration</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/pagination/>Pagination</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/voyager/>Voyager</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/glimesh-ids/>Glimesh IDs</a></li></ul></li><li><input type=checkbox id=section-46070fb9a15f8281e5989a88905887d2 class=toggle>
<label for=section-46070fb9a15f8281e5989a88905887d2 class="flex justify-between"><a>Authentication</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-cd9d01c15ace32e6fd3da5d1201bcd57 class=toggle>
<label for=section-cd9d01c15ace32e6fd3da5d1201bcd57 class="flex justify-between"><a>Access Token</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/clientcredentials/>Client Credentials</a></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/pkceauth/>PKCE</a></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/accesstoken/>Access Token</a></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/nodejs/node-access-token/>NodeJS Access Token</a></li></ul></li><li><input type=checkbox id=section-1a1dc1f670e3426ff413fcd1f7e7ec36 class=toggle>
<label for=section-1a1dc1f670e3426ff413fcd1f7e7ec36 class="flex justify-between"><a>Refresh Token</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/authentication/refreshtoken/refreshtoken/>Refresh Token</a></li></ul></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/auth-explained/>Auth Explained</a></li></ul></li><li><input type=checkbox id=section-05db2d31fc2e5a419ce9fd1c0e938e4e class=toggle>
<label for=section-05db2d31fc2e5a419ce9fd1c0e938e4e class="flex justify-between"><a>Chat</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/chat/websockets/>Connecting to Chat</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/mutations/>Sending Messages</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/chat-tokens/>Tokens (Message Parts)</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/moderation/>Moderation</a></li><li><input type=checkbox id=section-9c7ac9316f3056fdea1a344042fc8cb8 class=toggle>
<label for=section-9c7ac9316f3056fdea1a344042fc8cb8 class="flex justify-between"><a>Projects</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/chat/projects/sitewidesubscription/>Site Wide Subscription</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/projects/typescriptchatbot/>Typescript Chatbot</a></li></ul></li></ul></li><li><input type=checkbox id=section-0bc4e29f34ae087e007863102c5ba992 class=toggle>
<label for=section-0bc4e29f34ae087e007863102c5ba992 class="flex justify-between"><a>Live Updates</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/channels/>Channels</a></li><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/followers/>Followers</a></li><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/subscribers/>Subscribers</a></li><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/explanation/>Live Updates Explained</a></li></ul></li><li><input type=checkbox id=section-084ba1dbb512652712ad881ff8045610 class=toggle>
<label for=section-084ba1dbb512652712ad881ff8045610 class="flex justify-between"><a>Reference</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/reference/channel/>Channel</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/chat/>Chat</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/chatparts/>Chat Parts</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/mod/>Mod</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/scopes/>Scopes</a></li></ul></li><li><a href=https://glimesh.github.io/api-docs/docs/contributing/>Contributing</a></li><li><a href=https://glimesh.github.io/api-docs/docs/dev-app/>Dev App</a></li><li><input type=checkbox id=section-c51f25d1917de848e9ad26913759c6eb class=toggle>
<label for=section-c51f25d1917de848e9ad26913759c6eb class="flex justify-between"><a>Developer Resources</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/developerresources/libraries/>Libraries</a></li><li><a href=https://glimesh.github.io/api-docs/docs/developerresources/tools/>Tools</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/api-docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>NodeJS Query</strong>
<label for=toc-control><img src=/api-docs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#creating-the-project>Creating the Project</a></li><li><a href=#starting-up>Starting Up</a></li><li><a href=#define-options>Define Options</a></li><li><a href=#send-request>Send Request</a></li><li><a href=#common-errors>Common Errors</a></li></ul></nav></aside></header><article class=markdown><h1 id=glimesh-api-requests-with-nodejs>Glimesh API Requests With NodeJS
<a class=anchor href=#glimesh-api-requests-with-nodejs>#</a></h1><p>This is a basic tutorial for communicating with the Glimesh API using NodeJS. This guide assumes you know basic JS and have an access token from a user. You can use a client ID if you do not yet have a token. Having basic GraphQL knowledge would also be helpful.</p><blockquote><p>Need a refresh? This tutorial explains the basics of graphql. <a href=https://graphql.org/learn/schema/>https://graphql.org/learn/schema/</a></p></blockquote><h2 id=creating-the-project>Creating the Project
<a class=anchor href=#creating-the-project>#</a></h2><p>We need to create a basic project. In your terminal type</p><p><code>npm init -y</code> .</p><p>This will create a project.JSON file. This project uses the <a href=https://www.npmjs.com/package/request>Request</a> npm package. It helps with sending requests to the server and handling the response. In your terminal type</p><p><code>npm install request</code>.</p><p>That is the only package that you will need!</p><h2 id=starting-up>Starting Up
<a class=anchor href=#starting-up>#</a></h2><p>In your project create a blank JS file. I will title mine &ldquo;glimesh.js&rdquo;. Start by importing the Request library. Paste this at the top of your file.</p><pre tabindex=0><code>var request = require(&#39;request&#39;);
</code></pre><p>Now we need to build our query. In this example we will ask Glimesh for the name and ID of our user. If you are using an access token you can get this data in the <strong>myself</strong> object.
<code>query{ myself { username, id } }</code>
However, we need to convert this so JS can understand it. To do this we create a data variable. Paste this under the import statement above.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>query {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>myself {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>username,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>id}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>`</span>
</span></span></code></pre></div><p>If you are going to use a client ID you have to specify which user to get data for. This is because a client ID does not have a user identity. This query will return the same data as the <strong>myself</strong> object.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>query {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>user (username: &#34;USERNAME&#34;){
</span></span></span><span style=display:flex><span><span style=color:#e6db74>username,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>id}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>`</span>
</span></span></code></pre></div><p>Feel free to replace <code>USERNAME</code> with your own username! Since we are not accessing any private information we do not need any special permissions/scopes.</p><blockquote><p>Leave the quotations around <code>"USERNAME"</code>. Glimesh processes our query as graphQL. Even though <code>data</code> is a string Glimesh will convert it to graphQL when it receives our request. GraphQL requires that the user we search for be a string. Since we used `` to encase the contents of <code>data</code>, quotations must be used to keep your username a string.</p></blockquote><h2 id=define-options>Define Options
<a class=anchor href=#define-options>#</a></h2><p>Next we set up the call to the API. We need to add our data variable from above and our authentication as a header. We do this with the options variable. If you do not already have an authentication method (Client ID or Access Token) you need to get one now. Paste this below your query.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>options</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;https://glimesh.tv/api/graph&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;Authorization&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Bearer Your_Token&#39;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Notice we are sending the <strong>data</strong> variable from before. If you are using an access token replace &ldquo;Your_Token&rdquo; with your access token in the Authorization string. It should look like this.
<code>'Authorization': 'Bearer qertyuiop123456789'</code></p><p>If you are using a client ID replace &ldquo;Bearer&rdquo; with &ldquo;Client-ID&rdquo; and &ldquo;Your_Token&rdquo; with your client ID. It should look like this.</p><p><code>'Authorization': 'Client-ID qwertyuiop123456789'</code></p><h2 id=send-request>Send Request
<a class=anchor href=#send-request>#</a></h2><p>Now we set up the request. We ask Glimesh for data and we setup a callback function to handle it when it arrives. The server will normally respond in less than one second. Paste this below the options variable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>response</span>, <span style=color:#a6e22e>body</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>error</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>statusCode</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>200</span>) { <span style=color:#75715e>//if all works as it should...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>body</span>); <span style=color:#75715e>//The unfiltered response
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>convertedResponse</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>body</span>); <span style=color:#75715e>//Convert the response so we can use it
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`The user is </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>convertedResponse</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>myself</span>.<span style=color:#a6e22e>username</span><span style=color:#e6db74>}</span><span style=color:#e6db74> and the ID is </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>convertedResponse</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>myself</span>.<span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>) <span style=color:#75715e>//log any errors.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>body</span>) <span style=color:#75715e>//sometimes the body contains the error.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If you searched for a <strong>user</strong> instead of <strong>myself</strong> you need to change the <code>convertedResponse</code> output to:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`The user </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>convertedResponse</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>username</span><span style=color:#e6db74>}</span><span style=color:#e6db74> has an ID of </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>convertedResponse</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span></code></pre></div><p>Finally we send the request. At the bottom of the file add this line.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#a6e22e>request</span>(<span style=color:#a6e22e>options</span>, <span style=color:#a6e22e>callback</span>);
</span></span></code></pre></div><p>When you are ready, <strong>save the file</strong> and type the line below in your terminal to query the API!</p><p><code>node filename.js</code></p><p>Make sure to replace &ldquo;filename&rdquo; with the name of your file! For example -</p><p><code>node glimesh.js</code></p><h2 id=common-errors>Common Errors
<a class=anchor href=#common-errors>#</a></h2><ul><li><code>You must be logged in to access the API.</code></li></ul><blockquote><p>Cause: The auth string is incorrect. Make sure the token is valid. They expire after a short period and a new token is needed. You should also check the auth string. It should look like this <code>'Authorization': 'Bearer qertyuiop123456789'</code> or <code>'Authorization': 'Client-ID qertyuiop123456789'</code> depending on the auth method you used.</p></blockquote><ul><li><code>Internal Server Error</code></li></ul><blockquote><p>Cause: This is usually user error rather than a server error. Ensure the auth info is correct and check your query. The query is a string but the contents of that variable are graphQL. If you think your query is correct try it in a graphql <a href=/api-docs/docs/api/pagination>explorer</a>. Don&rsquo;t forget to remove the `` when testing in an editor!
<em><strong>Note that you must be signed in to use the API website!</strong></em></p></blockquote><ul><li><code>syntax error before: \"\\\"query\\\"\""</code></li></ul><blockquote><p>Cause: Your query is in the incorrect format. Ensure it matches the example in the code above. You can only request properties that exist and you must have the proper permissions to access them.</p></blockquote><h1 id=conclusion>Conclusion
<a class=anchor href=#conclusion>#</a></h1><p>This is the basis for most API requests. If you have any questions let us know in the #dev-questions channel in our <a href=https://glimesh.tv/s/discord>Discord</a>.</p><p>The full file can be found here.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>request</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;request&#39;</span>); <span style=color:#75715e>//Import the library
</span></span></span><span style=display:flex><span><span style=color:#75715e>//Define the data we want from Glimesh.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>query {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>myself {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>username,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>id}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// If you used a client ID the myself object will not exist. Try this:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>var data = `
</span></span></span><span style=display:flex><span><span style=color:#75715e>query {
</span></span></span><span style=display:flex><span><span style=color:#75715e>user (username: &#34;USERNAME&#34;){
</span></span></span><span style=display:flex><span><span style=color:#75715e>username,
</span></span></span><span style=display:flex><span><span style=color:#75715e>id}
</span></span></span><span style=display:flex><span><span style=color:#75715e>}`
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Make sure to replace USERNAME with a user!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Tell the request library where to send the request and how to add auth
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>options</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;https://glimesh.tv/api/graph&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;Authorization&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Bearer Token_Here&#39;</span> <span style=color:#75715e>//If you are using a client ID use &#39;Authorization&#39;: &#39;Client-ID qwertyuiop123456789&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Callback function runs when the data is recieved. We convert it to an object on arrival.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>response</span>, <span style=color:#a6e22e>body</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>error</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>statusCode</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>200</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>body</span>); <span style=color:#75715e>//The unfiltered response
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>convertedResponse</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>body</span>); <span style=color:#75715e>//Convert the response
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`You are </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>convertedResponse</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>myself</span>.<span style=color:#a6e22e>username</span><span style=color:#e6db74>}</span><span style=color:#e6db74> and your ID is </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>convertedResponse</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>myself</span>.<span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>// If you are using a client ID you will have requested the user object. Use the line below instead!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// console.log(`The user ${convertedResponse.data.user.username} has an ID of ${convertedResponse.data.user.id}`);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>); <span style=color:#75715e>//log any errors
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>body</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//send the request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>request</span>(<span style=color:#a6e22e>options</span>, <span style=color:#a6e22e>callback</span>);
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/Glimesh/api-docs/commit/44c279d2ddff14d61ce6e971dd5846e8518386c6 title='Last modified by MythoAway7 | October 15, 2022' target=_blank rel=noopener><img src=/api-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>October 15, 2022</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#creating-the-project>Creating the Project</a></li><li><a href=#starting-up>Starting Up</a></li><li><a href=#define-options>Define Options</a></li><li><a href=#send-request>Send Request</a></li><li><a href=#common-errors>Common Errors</a></li></ul></nav></aside></main></body></html>