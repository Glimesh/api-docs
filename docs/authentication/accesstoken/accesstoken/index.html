<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.104.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Access Tokens # An access token can be used to query the Glimesh API on behalf of a user. You can also get info about the user that the token belongs to.
This guide is for getting a token from a real user. If you are just testing or don&rsquo;t want to setup authentication yet you can use client credentials
Requesting A Token # Before requesting a token you must have a developer application."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Access Tokens # An access token can be used to query the Glimesh API on behalf of a user. You can also get info about the user that the token belongs to.
This guide is for getting a token from a real user. If you are just testing or don&rsquo;t want to setup authentication yet you can use client credentials
Requesting A Token # Before requesting a token you must have a developer application."><meta property="og:type" content="article"><meta property="og:url" content="https://glimesh.github.io/api-docs/docs/authentication/accesstoken/accesstoken/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-10-15T14:35:25-05:00"><title>Access Token | API-Docs</title><link rel=manifest href=/api-docs/manifest.json><link rel=icon href=/api-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/api-docs/book.min.8cbfebb3cede38504cf8ec2af15528c78f5d6c0aa02b6e39dcffcd3320289b34.css integrity="sha256-jL/rs87eOFBM+Owq8VUox49dbAqgK2453P/NMyAomzQ="><script defer src=/api-docs/en.search.min.4d83d16c621d6c95b8af13f51ceb328d2ea6fcb137f22273c4751b976981efcd.js integrity="sha256-TYPRbGIdbJW4rxP1HOsyjS6m/LE38iJzxHUbl2mB780="></script>
<script src=https://kit.fontawesome.com/a076d05399.js></script>
<script src=https://cdn.jsdelivr.net/npm/react@16/umd/react.production.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/react-dom@16/umd/react-dom.production.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/graphql-voyager/dist/voyager.css><script src=https://cdn.jsdelivr.net/npm/graphql-voyager/dist/voyager.min.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/api-docs><img src=/api-docs/glimesh.png alt=Logo><span>API-Docs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-bf7b3283e3790c00c8caaa140299052b class=toggle>
<label for=section-bf7b3283e3790c00c8caaa140299052b class="flex justify-between"><a>API</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-ed972e555096d8550e03791bdee2d785 class=toggle>
<label for=section-ed972e555096d8550e03791bdee2d785 class="flex justify-between"><a>API Queries</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/api/query-api/basic-query/>Generic Query</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/query-api/nodejs/node-query/>NodeJS Query</a></li></ul></li><li><input type=checkbox id=section-8c27155e24a80e56e9d44dbeacd7d1ea class=toggle>
<label for=section-8c27155e24a80e56e9d44dbeacd7d1ea class="flex justify-between"><a>Stream Settings</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/api/stream/updatestreaminfo/>Update Stream Info</a></li></ul></li><li><a href=https://glimesh.github.io/api-docs/docs/api/api-explorer/>API Explorer</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/migration/>Migration</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/pagination/>Pagination</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/voyager/>Voyager</a></li><li><a href=https://glimesh.github.io/api-docs/docs/api/glimesh-ids/>Glimesh IDs</a></li></ul></li><li><input type=checkbox id=section-46070fb9a15f8281e5989a88905887d2 class=toggle checked>
<label for=section-46070fb9a15f8281e5989a88905887d2 class="flex justify-between"><a>Authentication</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-cd9d01c15ace32e6fd3da5d1201bcd57 class=toggle checked>
<label for=section-cd9d01c15ace32e6fd3da5d1201bcd57 class="flex justify-between"><a>Access Token</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/clientcredentials/>Client Credentials</a></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/pkceauth/>PKCE</a></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/accesstoken/ class=active>Access Token</a></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/accesstoken/nodejs/node-access-token/>NodeJS Access Token</a></li></ul></li><li><input type=checkbox id=section-1a1dc1f670e3426ff413fcd1f7e7ec36 class=toggle>
<label for=section-1a1dc1f670e3426ff413fcd1f7e7ec36 class="flex justify-between"><a>Refresh Token</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/authentication/refreshtoken/refreshtoken/>Refresh Token</a></li></ul></li><li><a href=https://glimesh.github.io/api-docs/docs/authentication/auth-explained/>Auth Explained</a></li></ul></li><li><input type=checkbox id=section-05db2d31fc2e5a419ce9fd1c0e938e4e class=toggle>
<label for=section-05db2d31fc2e5a419ce9fd1c0e938e4e class="flex justify-between"><a>Chat</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/chat/websockets/>Connecting to Chat</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/mutations/>Sending Messages</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/chat-tokens/>Tokens (Message Parts)</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/moderation/>Moderation</a></li><li><input type=checkbox id=section-9c7ac9316f3056fdea1a344042fc8cb8 class=toggle>
<label for=section-9c7ac9316f3056fdea1a344042fc8cb8 class="flex justify-between"><a>Projects</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/chat/projects/sitewidesubscription/>Site Wide Subscription</a></li><li><a href=https://glimesh.github.io/api-docs/docs/chat/projects/typescriptchatbot/>Typescript Chatbot</a></li></ul></li></ul></li><li><input type=checkbox id=section-0bc4e29f34ae087e007863102c5ba992 class=toggle>
<label for=section-0bc4e29f34ae087e007863102c5ba992 class="flex justify-between"><a>Live Updates</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/channels/>Channels</a></li><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/followers/>Followers</a></li><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/subscribers/>Subscribers</a></li><li><a href=https://glimesh.github.io/api-docs/docs/live-updates/explanation/>Live Updates Explained</a></li></ul></li><li><input type=checkbox id=section-084ba1dbb512652712ad881ff8045610 class=toggle>
<label for=section-084ba1dbb512652712ad881ff8045610 class="flex justify-between"><a>Reference</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/reference/channel/>Channel</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/chat/>Chat</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/chatparts/>Chat Parts</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/mod/>Mod</a></li><li><a href=https://glimesh.github.io/api-docs/docs/reference/scopes/>Scopes</a></li></ul></li><li><a href=https://glimesh.github.io/api-docs/docs/contributing/>Contributing</a></li><li><a href=https://glimesh.github.io/api-docs/docs/dev-app/>Dev App</a></li><li><input type=checkbox id=section-c51f25d1917de848e9ad26913759c6eb class=toggle>
<label for=section-c51f25d1917de848e9ad26913759c6eb class="flex justify-between"><a>Developer Resources</a>
<span>▾</span></label><ul><li><a href=https://glimesh.github.io/api-docs/docs/developerresources/libraries/>Libraries</a></li><li><a href=https://glimesh.github.io/api-docs/docs/developerresources/tools/>Tools</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/api-docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Access Token</strong>
<label for=toc-control><img src=/api-docs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#requesting-a-token>Requesting A Token</a></li><li><a href=#common-errors>Common Errors</a></li></ul></nav></aside></header><article class=markdown><h1 id=access-tokens>Access Tokens
<a class=anchor href=#access-tokens>#</a></h1><p>An access token can be used to query the Glimesh API on behalf of a user. You can also get info about the user that the token belongs to.</p><blockquote><p>This guide is for getting a token from a real user. If you are just testing or don&rsquo;t want to setup authentication yet you can use <a href=/api-docs/docs/authentication/accesstoken/clientcredentials/>client credentials</a></p></blockquote><h2 id=requesting-a-token>Requesting A Token
<a class=anchor href=#requesting-a-token>#</a></h2><p>Before requesting a token you must have a <a href=https://glimesh.tv/users/settings/applications>developer application</a>. You will need your client ID, secret ID, and redirect URL.
<img src=https://i.imgur.com/IIzwkHc.png alt="app image"></p><p>First you need to have a user authenticate with your app. The user must be directed to</p><pre tabindex=0><code class=language-URL data-lang=URL>https://glimesh.tv/oauth/authorize?response_type=code&amp;state=&amp;client_id=CLIENT_ID&amp;scope=public%20email%20chat%20streamkey&amp;redirect_uri=REDIRECT_URL
</code></pre><p>Make sure to replace your client ID and your redirect URL. The redirect URL must match one of the URL&rsquo;s on your application. Scopes are space separated values that determine what permissions you want from the user. Only request the scopes that you need.</p><p>The current scopes are:</p><ul><li><strong>public</strong>: Get public information about the user and other users on Glimesh.</li><li><strong>email</strong>: View the email of the user.</li><li><strong>chat</strong>: View and speak in a chatroom.</li><li><strong>stream</strong> View the streamkey of the user.</li><li><strong>follow</strong> Follow and unfollow on behalf of the user.</li><li><strong>stream_info</strong> Change the title on behalf of the channel. (Will be expanded to cover more fields)</li></ul><p>When the user is sent to the link they will have to accept your app scopes. They will then be sent to your apps redirect URL. Glimesh will send a code inside the URL when they are sent back to your app. You need to extract it from the URL.</p><pre tabindex=0><code class=language-URL data-lang=URL>http://your-app.com/some/area?code=qwertyuiop123
</code></pre><p>Once you have the code you need to make a request to Glimesh. We will exchange the code for an access token.</p><pre tabindex=0><code class=language-URL data-lang=URL>POST https://glimesh.tv/api/oauth/token?grant_type=authorization_code&amp;code=CODE&amp;redirect_uri=REDIRECT_URL&amp;client_id=CLIENTID&amp;client_secret=SECRETID
</code></pre><p>Send a POST request with the URL above replacing the code,redirect url, client ID, and secret ID. Remember to <strong>keep the secret ID hidden</strong> from your users. When Glimesh receives the POST request it will send back the information we want. Once it is parsed it will look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>access_token</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;qwertyuiopo1234567890&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>created_at</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;2020-12-14T15:15:29&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>expires_in</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21600</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>refresh_token</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;qwertyuiop0987654321&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>scope</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;public email chat streamkey&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>token_type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;bearer&#39;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now you can query the Glimesh API on behalf of a user. This token will expire in 24 hours so you need to refresh it or ask the user for a new one. If you have any questions talk to us in the #dev-questions channel in our <a href=https://glimesh.tv/s/discord>Discord</a>.</p><blockquote><p>Ready to refresh your token? Continue with OAuth <a href=/api-docs/docs/authentication/refreshtoken/refreshtoken/>here</a></p></blockquote><h2 id=common-errors>Common Errors
<a class=anchor href=#common-errors>#</a></h2><p>There are a few errors you may encounter while requesting a token.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;invalid_grant&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error_description</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;The provided authorization grant is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client.&#39;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This means something is wrong with your URL. You can only use each code once. You must send the request with the <code>grant_type=authorization_code</code> for Glimesh to send you the access token. Ensure all of the data in the URL matches the data in your dev application. Glimesh will refuse any request that is not properly formatted.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;invalid_request&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error_description</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;The request is missing a required parameter, includes an unsupported parameter value, or is otherwise malformed.&#39;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This is a request error. Some part of your URL is not necessary or missing. Ensure the parameters in the URL are spelled correctly. You should also check that you have all of the required data in the URL.</p><p><code>Error: 401 Unauthorized. You must be logged in to access the API.</code></p><p>This is an authentication issue. This is commonly seen when querying the API but I added it here because it most likely means you must request another token. You must renew or request a new token and send the API request to Glimesh properly. Tokens expire daily unless they are renewed.</p><blockquote><p>Stuck with something? Talk to us in <a href=https://glimesh.tv/s/discord>Discord</a>. We would be happy to help you!</p></blockquote></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/Glimesh/api-docs/commit/1380e02065d57ffea5d79ec81220367bfa84c5a9 title='Last modified by MythoAway7 | October 15, 2022' target=_blank rel=noopener><img src=/api-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>October 15, 2022</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#requesting-a-token>Requesting A Token</a></li><li><a href=#common-errors>Common Errors</a></li></ul></nav></aside></main></body></html>